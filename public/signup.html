<!doctype html>
<html>
<head>
<meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1">
<title>Signup - Andhrawala</title>
<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light">
<div class="container py-4">
  <h3>Sign up</h3>
  <form id="f">
    <div class="mb-3"><input class="form-control" id="username" placeholder="username"></div>
    <div class="mb-3"><input class="form-control" id="password" type="password" placeholder="password"></div>
    <button class="btn btn-primary">Sign up</button>
  </form>
  <div id="msg" class="mt-3"></div>
</div>
<script>
document.getElementById('f').onsubmit = async (e) => {
  e.preventDefault();
  const username = document.getElementById('username').value;
  const password = document.getElementById('password').value;
  const res = await fetch('/api/signup', {
    method:'POST', headers:{'Content-Type':'application/json'}, body: JSON.stringify({username,password})
  });
  const data = await res.json();
  if (data.ok) { document.getElementById('msg').innerHTML = '<div class="alert alert-success">Created. <a href="/static/login.html">Login</a></div>'; }
  else document.getElementById('msg').innerHTML = '<div class="alert alert-danger">' + (data.error || 'Error') + '</div>';
};
</script>
</body>
</html>
